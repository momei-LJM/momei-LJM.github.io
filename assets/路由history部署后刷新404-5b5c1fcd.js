import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-db584d24.js";import{_ as d}from"./ABox-ea49ddec.js";import{_ as u,u as m,p as _,c as f,w as s,o as g,a as t,b as e,d as a,e as y,r as l,f as E}from"./app-494ea640.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-15556b16.js";import"./YunCard.vue_vue_type_script_setup_true_lang-8fae949c.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-81abd45e.js";import"./index-463abdac.js";const k="/contents/postAssets/rt.png",Y=JSON.parse('{"title":"vue-router history部署后刷新404","description":"","frontmatter":{"title":"vue-router history部署后刷新404","date":"2023-6-9","updated":"2023-6-9","categories":"前端小记","excerpt_type":"html","tags":["vue-router","nginx"],"top":1},"headers":[{"level":3,"title":"hash模式","slug":"hash模式","link":"#hash模式","children":[]},{"level":3,"title":"history","slug":"history","link":"#history","children":[]},{"level":3,"title":"如何解决？","slug":"如何解决","link":"#如何解决","children":[]},{"level":3,"title":"nginx配置","slug":"nginx配置","link":"#nginx配置","children":[]},{"level":3,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/路由history部署后刷新404.md","path":"/home/runner/work/momei-LJM.github.io/momei-LJM.github.io/pages/posts/路由history部署后刷新404.md","lastUpdated":1703232717000}'),r=JSON.parse('{"title":"vue-router history部署后刷新404","description":"","frontmatter":{"title":"vue-router history部署后刷新404","date":"2023-6-9","updated":"2023-6-9","categories":"前端小记","excerpt_type":"html","tags":["vue-router","nginx"],"top":1},"headers":[{"level":3,"title":"hash模式","slug":"hash模式","link":"#hash模式","children":[]},{"level":3,"title":"history","slug":"history","link":"#history","children":[]},{"level":3,"title":"如何解决？","slug":"如何解决","link":"#如何解决","children":[]},{"level":3,"title":"nginx配置","slug":"nginx配置","link":"#nginx配置","children":[]},{"level":3,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/路由history部署后刷新404.md","path":"/home/runner/work/momei-LJM.github.io/momei-LJM.github.io/pages/posts/路由history部署后刷新404.md","lastUpdated":1703232717000}'),b={name:"pages/posts/路由history部署后刷新404.md",data(){return{data:r,frontmatter:r.frontmatter,$frontmatter:r.frontmatter}},setup(){const n=m();n.meta.frontmatter=Object.assign(n.meta.frontmatter,r.frontmatter),_("pageData",r)}},v={id:"hash模式",tabindex:"-1"},$=t("code",null,"#",-1),x=t("code",null,"#",-1),j=t("blockquote",null,[t("p",null,"例如： 127.0.0.1/#/login , hash 就是 #/login")],-1),P=t("p",null,"hash 的特点是页面刷新和改变 hash ，hash 不会被带入网络请求。",-1),A=t("img",{src:k},null,-1),N=t("p",null,"所以，实际上我们的路由每次刷新都是请求的相同的 url ，返回的始终是一个页面，由于是 SPA 的特性，实际上已经加载完所有需要的页面资源了，页面的切换不过是通过监听 hash 的改变，执行 js 脚本来更换视图模块。",-1),C={id:"history",tabindex:"-1"},J=t("p",null,[e("知道hash的概念后，history也就更好理解了。history恰恰和hash相反。history没有了"),t("code",null,"#"),e("分隔，每次改变url后刷新页面都会发送请求。")],-1),L=t("p",null,"那如果请求一个服务器不存在的资源，自然就404了。",-1),w={id:"如何解决",tabindex:"-1"},D=t("p",null,"关于如何解决history模式刷新404问题，之前百度回答也好，八股文也好，似乎我只有这么一个印象：‘这种模式后台配置支持’。",-1),F=t("p",null,[e("我：？？？~"),t("s",null,"什么玩意儿"),e("~")],-1),M=t("p",null,"直到最近看了nginx，才对这个恍然大悟。",-1),V={id:"nginx配置",tabindex:"-1"},B=t("div",{class:"language-nginx"},[t("button",{title:"Copy Code",class:"copy"}),t("span",{class:"lang"},"nginx"),t("pre",{class:"shiki github-dark vp-code-dark"},[t("code",null,[t("span",{class:"line"},[t("span",{style:{color:"#F97583"}},"location"),t("span",{style:{color:"#E1E4E8"}}," "),t("span",{style:{color:"#B392F0"}},"/ "),t("span",{style:{color:"#E1E4E8"}},"{")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#E1E4E8"}},"		//$uri表示域名右面的path，表示请求一个资源文件，$uri/表示请求文件目录")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#E1E4E8"}},"		//这段配置的意思是   请求过来时，先找文件资源，找不到再找目录，都找不到则重定向到index."),t("span",{style:{color:"#F97583"}},"html")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#E1E4E8"}},"		//最后一个参数表示重定向路径")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#E1E4E8"}},"       "),t("span",{style:{color:"#F97583"}}," try_files "),t("span",{style:{color:"#E1E4E8"}},"$uri $uri/ /index.html;")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#E1E4E8"}},"    }")])])]),t("pre",{class:"shiki github-light vp-code-light"},[t("code",null,[t("span",{class:"line"},[t("span",{style:{color:"#D73A49"}},"location"),t("span",{style:{color:"#24292E"}}," "),t("span",{style:{color:"#6F42C1"}},"/ "),t("span",{style:{color:"#24292E"}},"{")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#24292E"}},"		//$uri表示域名右面的path，表示请求一个资源文件，$uri/表示请求文件目录")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#24292E"}},"		//这段配置的意思是   请求过来时，先找文件资源，找不到再找目录，都找不到则重定向到index."),t("span",{style:{color:"#D73A49"}},"html")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#24292E"}},"		//最后一个参数表示重定向路径")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#24292E"}},"       "),t("span",{style:{color:"#D73A49"}}," try_files "),t("span",{style:{color:"#24292E"}},"$uri $uri/ /index.html;")]),e(`
`),t("span",{class:"line"},[t("span",{style:{color:"#24292E"}},"    }")])])]),t("button",{class:"collapse"})],-1),S={id:"总结",tabindex:"-1"},O=t("ol",null,[t("li",null,"浏览器输入url，刷新，过程发生了什么"),t("li",null,"hash和history模式在浏览器上的区别"),t("li",null,"后台配置？使用nginx配置")],-1);function q(n,z,U,I,i,R){const o=E,h=d,c=p;return g(),f(c,{frontmatter:i.frontmatter,data:i.data},{"main-content-md":s(()=>[t("h3",v,[e("hash模式 "),a(o,{class:"header-anchor",href:"#hash模式","aria-label":'Permalink to "hash模式"'},{default:s(()=>[e("​")]),_:1})]),t("p",null,[a(o,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Location/hash",target:"_blank",rel:"noreferrer"},{default:s(()=>[e("hash")]),_:1}),e("模式是在域名和 path 之间使用"),$,e("进行分隔，"),x,e("及其后面的 url 片段标识符就是 hash 字符串。")]),j,P,t("blockquote",null,[t("p",null,[e("例如：当我们分别请求 "),a(o,{href:"https://juejin.cn/",target:"_blank",rel:"noreferrer"},{default:s(()=>[e("https://juejin.cn/")]),_:1}),e(" 和 "),a(o,{href:"https://juejin.cn/#aaa",target:"_blank",rel:"noreferrer"},{default:s(()=>[e("https://juejin.cn/#aaa")]),_:1}),e(" ,会发现 network 中始终只有 "),a(o,{href:"https://juejin.cn/",target:"_blank",rel:"noreferrer"},{default:s(()=>[e("https://juejin.cn/")]),_:1}),e(" 的 网络请求。再次说明了 hash 不会影响网络请求结果。")])]),a(h,null,{default:s(()=>[A]),_:1}),N,y(" more "),t("h3",C,[e("history "),a(o,{class:"header-anchor",href:"#history","aria-label":'Permalink to "history"'},{default:s(()=>[e("​")]),_:1})]),J,L,t("h3",w,[e("如何解决？ "),a(o,{class:"header-anchor",href:"#如何解决","aria-label":'Permalink to "如何解决？"'},{default:s(()=>[e("​")]),_:1})]),D,F,M,t("h3",V,[e("nginx配置 "),a(o,{class:"header-anchor",href:"#nginx配置","aria-label":'Permalink to "nginx配置"'},{default:s(()=>[e("​")]),_:1})]),B,t("h3",S,[e("总结 "),a(o,{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},{default:s(()=>[e("​")]),_:1})]),O]),"main-header":s(()=>[l(n.$slots,"main-header")]),"main-header-after":s(()=>[l(n.$slots,"main-header-after")]),"main-nav":s(()=>[l(n.$slots,"main-nav")]),"main-content":s(()=>[l(n.$slots,"main-content")]),"main-content-after":s(()=>[l(n.$slots,"main-content-after")]),"main-nav-before":s(()=>[l(n.$slots,"main-nav-before")]),"main-nav-after":s(()=>[l(n.$slots,"main-nav-after")]),comment:s(()=>[l(n.$slots,"comment")]),footer:s(()=>[l(n.$slots,"footer")]),aside:s(()=>[l(n.$slots,"aside")]),"aside-custom":s(()=>[l(n.$slots,"aside-custom")]),default:s(()=>[l(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const Z=u(b,[["render",q]]);export{Y as __pageData,Z as default};
