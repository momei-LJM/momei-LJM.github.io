import{_}from"./ValaxyMain.vue_vue_type_style_index_0_lang-d30711a2.js";import{_ as h,o as c,b as m,r as a,j as f,k as g,e,p as y,c as v,w as s,f as t,g as o,h as $,i as k}from"./app-2f024484.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-5560eec8.js";import"./YunCard.vue_vue_type_style_index_0_lang-33ef9c0a.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-cad8faad.js";const A={},C=n=>(f("data-v-36a9c760"),n=n(),g(),n),x={class:"a-box"},b=C(()=>e("h3",null,"hellow word",-1));function D(n,d){return c(),m("div",x,[a(n.$slots,"default",{},()=>[b],!0)])}const j=h(A,[["render",D],["__scopeId","data-v-36a9c760"]]),F="/contents/postAssets/rt.png",ne=JSON.parse('{"title":"vue-router history部署后刷新404","description":"","frontmatter":{"title":"vue-router history部署后刷新404","date":"2023-6-9","updated":"2023-6-9","categories":"前端小记","excerpt_type":"html","tags":["vue-router","nginx"],"top":1},"headers":[{"level":3,"title":"hash模式","slug":"hash模式","link":"#hash模式","children":[]},{"level":3,"title":"history","slug":"history","link":"#history","children":[]},{"level":3,"title":"如何解决？","slug":"如何解决？","link":"#如何解决？","children":[]},{"level":3,"title":"nginx配置","slug":"nginx配置","link":"#nginx配置","children":[]},{"level":3,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/路由history部署后刷新404.md","path":"/home/runner/work/2262754355JM.github.io/2262754355JM.github.io/pages/posts/路由history部署后刷新404.md","lastUpdated":1686323035000}'),r=JSON.parse('{"title":"vue-router history部署后刷新404","description":"","frontmatter":{"title":"vue-router history部署后刷新404","date":"2023-6-9","updated":"2023-6-9","categories":"前端小记","excerpt_type":"html","tags":["vue-router","nginx"],"top":1},"headers":[{"level":3,"title":"hash模式","slug":"hash模式","link":"#hash模式","children":[]},{"level":3,"title":"history","slug":"history","link":"#history","children":[]},{"level":3,"title":"如何解决？","slug":"如何解决？","link":"#如何解决？","children":[]},{"level":3,"title":"nginx配置","slug":"nginx配置","link":"#nginx配置","children":[]},{"level":3,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/路由history部署后刷新404.md","path":"/home/runner/work/2262754355JM.github.io/2262754355JM.github.io/pages/posts/路由history部署后刷新404.md","lastUpdated":1686323035000}'),w={name:"pages/posts/路由history部署后刷新404.md",data(){return{data:r,frontmatter:r.frontmatter}},setup(){y("pageData",r)}},B={id:"hash模式",tabindex:"-1"},N=e("code",null,"#",-1),S=e("code",null,"#",-1),J=e("blockquote",null,[e("p",null,"例如： 127.0.0.1/#/login , hash 就是 #/login")],-1),I=e("p",null,"hash 的特点是页面刷新和改变 hash ，hash 不会被带入网络请求。",-1),M=e("img",{src:F},null,-1),V=e("p",null,"所以，实际上我们的路由每次刷新都是请求的相同的 url ，返回的始终是一个页面，由于是 SPA 的特性，实际上已经加载完所有需要的页面资源了，页面的切换不过是通过监听 hash 的改变，执行 js 脚本来更换视图模块。",-1),P={id:"history",tabindex:"-1"},q=e("p",null,[t("知道hash的概念后，history也就更好理解了。history恰恰和hash相反。history没有了"),e("code",null,"#"),t("分隔，每次改变url后刷新页面都会发送请求。")],-1),z=e("p",null,"那如果请求一个服务器不存在的资源，自然就404了。",-1),E={id:"如何解决？",tabindex:"-1"},L=e("p",null,"关于如何解决history模式刷新404问题，之前百度回答也好，八股文也好，似乎我只有这么一个印象：‘这种模式后台配置支持’。",-1),O=e("p",null,[t("我：？？？~"),e("s",null,"什么玩意儿"),t("~")],-1),U=e("p",null,"直到最近看了nginx，才对这个恍然大悟。",-1),T={id:"nginx配置",tabindex:"-1"},W=e("div",{class:"language-nginx"},[e("span",{class:"copy"}),e("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#C792EA"}},"location"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#FFCB6B"}},"/ "),e("span",{style:{color:"#A6ACCD"}},"{")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"		//$uri表示域名右面的path，表示请求一个资源文件，$uri/表示请求文件目录")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"		//这段配置的意思是   请求过来时，先找文件资源，找不到再找目录，都找不到则重定向到index."),e("span",{style:{color:"#89DDFF"}},"html")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"		//最后一个参数表示重定向路径")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"       "),e("span",{style:{color:"#89DDFF"}}," try_files $"),e("span",{style:{color:"#A6ACCD"}},"uri "),e("span",{style:{color:"#89DDFF"}},"$"),e("span",{style:{color:"#A6ACCD"}},"uri/ /index.html"),e("span",{style:{color:"#89DDFF"}},";")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    }")]),t(`
`),e("span",{class:"line"})])])],-1),G={id:"总结",tabindex:"-1"},H=e("ol",null,[e("li",null,"浏览器输入url，刷新，过程发生了什么"),e("li",null,"hash和history模式在浏览器上的区别"),e("li",null,"后台配置？使用nginx配置")],-1);function K(n,d,Q,R,i,X){const l=k,p=j,u=_;return c(),v(u,{frontmatter:i.frontmatter,data:i.data},{"main-content-md":s(()=>[e("h3",B,[t("hash模式 "),o(l,{class:"header-anchor",href:"#hash模式","aria-hidden":"true"},{default:s(()=>[t("#")]),_:1})]),e("p",null,[o(l,{href:"./'https://developer.mozilla.org/zh-CN/docs/Web/API/Location/hash'"},{default:s(()=>[t("hash")]),_:1}),t("模式是在域名和 path 之间使用"),N,t("进行分隔，"),S,t("及其后面的 url 片段标识符就是 hash 字符串。")]),J,I,e("blockquote",null,[e("p",null,[t("例如：当我们分别请求 "),o(l,{href:"https://juejin.cn/",target:"_blank",rel:"noreferrer"},{default:s(()=>[t("https://juejin.cn/")]),_:1}),t(" 和 "),o(l,{href:"https://juejin.cn/#aaa",target:"_blank",rel:"noreferrer"},{default:s(()=>[t("https://juejin.cn/#aaa")]),_:1}),t(" ,会发现 network 中始终只有 "),o(l,{href:"https://juejin.cn/",target:"_blank",rel:"noreferrer"},{default:s(()=>[t("https://juejin.cn/")]),_:1}),t(" 的 网络请求。再次说明了 hash 不会影响网络请求结果。")])]),o(p,null,{default:s(()=>[M]),_:1}),V,$(" more "),e("h3",P,[t("history "),o(l,{class:"header-anchor",href:"#history","aria-hidden":"true"},{default:s(()=>[t("#")]),_:1})]),q,z,e("h3",E,[t("如何解决？ "),o(l,{class:"header-anchor",href:"#如何解决？","aria-hidden":"true"},{default:s(()=>[t("#")]),_:1})]),L,O,U,e("h3",T,[t("nginx配置 "),o(l,{class:"header-anchor",href:"#nginx配置","aria-hidden":"true"},{default:s(()=>[t("#")]),_:1})]),W,e("h3",G,[t("总结 "),o(l,{class:"header-anchor",href:"#总结","aria-hidden":"true"},{default:s(()=>[t("#")]),_:1})]),H]),"main-header":s(()=>[a(n.$slots,"main-header")]),"main-header-after":s(()=>[a(n.$slots,"main-header-after")]),"main-nav":s(()=>[a(n.$slots,"main-nav")]),"main-content":s(()=>[a(n.$slots,"main-content")]),"main-content-after":s(()=>[a(n.$slots,"main-content-after")]),"main-nav-before":s(()=>[a(n.$slots,"main-nav-before")]),"main-nav-after":s(()=>[a(n.$slots,"main-nav-after")]),comment:s(()=>[a(n.$slots,"comment")]),footer:s(()=>[a(n.$slots,"footer")]),aside:s(()=>[a(n.$slots,"aside")]),"aside-custom":s(()=>[a(n.$slots,"aside-custom")]),default:s(()=>[a(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const ae=h(w,[["render",K]]);export{ne as __pageData,ae as default};
