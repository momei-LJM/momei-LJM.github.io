import{_ as k}from"./ValaxyMain.vue_vue_type_style_index_0_lang.BYdfYN9A.js";import{_ as f}from"./ABox.Ct1F9_6k.js";import{f as y,a as b,u as v}from"./chunks/vue-router.DGZgEIYB.js";import{O as E,a4 as n,V as i,U as t,B as $,S as x,X as s,u as j,P,D as c}from"./framework.z998Is_O.js";import"./app.p3Dtv5zv.js";import"./chunks/dayjs.CCYrSalk.js";import"./chunks/vue-i18n.DAfKrLdY.js";import"./chunks/@vueuse/motion.CSqH7L7M.js";import"./chunks/pinia.B-qOCksF.js";import"./chunks/nprogress.BahbDzmd.js";import"./YunComment.vue_vue_type_style_index_0_lang.KBluSiAR.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.CtPcyvps.js";import"./post.C9jERVxD.js";const A="/contents/postAssets/rt.png",B=y("/posts/路由history部署后刷新404",async l=>JSON.parse('{"title":"vue-router history部署后刷新404","description":"","frontmatter":{"title":"vue-router history部署后刷新404","date":"2023-6-9","updated":"2023-6-9","categories":"前端小记","excerpt_type":"html","tags":["vue-router","nginx"],"top":1},"headers":[{"level":3,"title":"hash模式","slug":"hash模式","link":"#hash模式","children":[]},{"level":3,"title":"history","slug":"history","link":"#history","children":[]},{"level":3,"title":"如何解决？","slug":"如何解决","link":"#如何解决","children":[]},{"level":3,"title":"nginx配置","slug":"nginx配置","link":"#nginx配置","children":[]},{"level":3,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/路由history部署后刷新404.md","lastUpdated":1742722775000}'),{lazy:(l,o)=>l.name===o.name}),J={__name:"路由history部署后刷新404",setup(l,{expose:o}){var u;const{data:h}=B(),m=v(),p=b(),r=Object.assign(p.meta.frontmatter||{},((u=h.value)==null?void 0:u.frontmatter)||{});return p.meta.frontmatter=r,m.currentRoute.value.data=h.value,c("valaxy:frontmatter",r),globalThis.$frontmatter=r,o({frontmatter:{title:"vue-router history部署后刷新404",date:"2023-6-9",updated:"2023-6-9",categories:"前端小记",excerpt_type:"html",tags:["vue-router","nginx"],top:1}}),(a,e)=>{const d=f,g=k;return P(),E(g,{frontmatter:j(r)},{"main-content-md":n(()=>[e[1]||(e[1]=t("h3",{id:"hash模式",tabindex:"-1"},[s("hash模式 "),t("a",{class:"header-anchor",href:"#hash模式","aria-label":'Permalink to "hash模式"'},"​")],-1)),e[2]||(e[2]=t("p",null,[t("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Location/hash",target:"_blank",rel:"noreferrer"},"hash"),s("模式是在域名和 path 之间使用"),t("code",null,"#"),s("进行分隔，"),t("code",null,"#"),s("及其后面的 url 片段标识符就是 hash 字符串。")],-1)),e[3]||(e[3]=t("blockquote",null,[t("p",null,"例如： 127.0.0.1/#/login , hash 就是 #/login")],-1)),e[4]||(e[4]=t("p",null,"hash 的特点是页面刷新和改变 hash ，hash 不会被带入网络请求。",-1)),e[5]||(e[5]=t("blockquote",null,[t("p",null,[s("例如：当我们分别请求 "),t("a",{href:"https://juejin.cn/",target:"_blank",rel:"noreferrer"},"https://juejin.cn/"),s(" 和 "),t("a",{href:"https://juejin.cn/#aaa",target:"_blank",rel:"noreferrer"},"https://juejin.cn/#aaa"),s(" ,会发现 network 中始终只有 "),t("a",{href:"https://juejin.cn/",target:"_blank",rel:"noreferrer"},"https://juejin.cn/"),s(" 的 网络请求。再次说明了 hash 不会影响网络请求结果。")])],-1)),$(d,null,{default:n(()=>e[0]||(e[0]=[t("img",{src:A},null,-1)])),_:1}),e[6]||(e[6]=t("p",null,"所以，实际上我们的路由每次刷新都是请求的相同的 url ，返回的始终是一个页面，由于是 SPA 的特性，实际上已经加载完所有需要的页面资源了，页面的切换不过是通过监听 hash 的改变，执行 js 脚本来更换视图模块。",-1)),x(" more "),e[7]||(e[7]=t("h3",{id:"history",tabindex:"-1"},[s("history "),t("a",{class:"header-anchor",href:"#history","aria-label":'Permalink to "history"'},"​")],-1)),e[8]||(e[8]=t("p",null,[s("知道hash的概念后，history也就更好理解了。history恰恰和hash相反。history没有了"),t("code",null,"#"),s("分隔，每次改变url后刷新页面都会发送请求。")],-1)),e[9]||(e[9]=t("p",null,"那如果请求一个服务器不存在的资源，自然就404了。",-1)),e[10]||(e[10]=t("h3",{id:"如何解决",tabindex:"-1"},[s("如何解决？ "),t("a",{class:"header-anchor",href:"#如何解决","aria-label":'Permalink to "如何解决？"'},"​")],-1)),e[11]||(e[11]=t("p",null,"关于如何解决history模式刷新404问题，之前百度回答也好，八股文也好，似乎我只有这么一个印象：‘这种模式后台配置支持’。",-1)),e[12]||(e[12]=t("p",null,[s("我：？？？~"),t("s",null,"什么玩意儿"),s("~")],-1)),e[13]||(e[13]=t("p",null,"直到最近看了nginx，才对这个恍然大悟。",-1)),e[14]||(e[14]=t("h3",{id:"nginx配置",tabindex:"-1"},[s("nginx配置 "),t("a",{class:"header-anchor",href:"#nginx配置","aria-label":'Permalink to "nginx配置"'},"​")],-1)),e[15]||(e[15]=t("div",{class:"language-nginx vp-adaptive-theme"},[t("button",{title:"Copy Code",class:"copy"}),t("span",{class:"lang"},"nginx"),t("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," / "),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		//$uri表示域名右面的path，表示请求一个资源文件，$uri/表示请求文件目录")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		//这段配置的意思是   请求过来时，先找文件资源，找不到再找目录，都找不到则重定向到index."),t("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"html")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		//最后一个参数表示重定向路径")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        try_files "),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$uri $uri/ /index.html;")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")])])]),t("button",{class:"collapse"})],-1)),e[16]||(e[16]=t("h3",{id:"总结",tabindex:"-1"},[s("总结 "),t("a",{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},"​")],-1)),e[17]||(e[17]=t("ol",null,[t("li",null,"浏览器输入url，刷新，过程发生了什么"),t("li",null,"hash和history模式在浏览器上的区别"),t("li",null,"后台配置？使用nginx配置")],-1))]),"main-header":n(()=>[i(a.$slots,"main-header")]),"main-header-after":n(()=>[i(a.$slots,"main-header-after")]),"main-nav":n(()=>[i(a.$slots,"main-nav")]),"main-content-before":n(()=>[i(a.$slots,"main-content-before")]),"main-content":n(()=>[i(a.$slots,"main-content")]),"main-content-after":n(()=>[i(a.$slots,"main-content-after")]),"main-nav-before":n(()=>[i(a.$slots,"main-nav-before")]),"main-nav-after":n(()=>[i(a.$slots,"main-nav-after")]),comment:n(()=>[i(a.$slots,"comment")]),footer:n(()=>[i(a.$slots,"footer")]),aside:n(()=>[i(a.$slots,"aside")]),"aside-custom":n(()=>[i(a.$slots,"aside-custom")]),default:n(()=>[i(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{J as default,B as usePageData};
